{% import _self as formMacros %}

{% macro printBookRow(book) %}
    <div class="form-row js-book-item border-bottom mt-md-3">
        <div class="form-row align-items-center">
            <div class="col-sm-12 col-md-auto">
                <div class="form-group  {% if form_errors(book.isbn) %}error{% endif %}">
                    {{ form_label(book.isbn) }}
                    {{ form_widget(book.isbn, { 'attr': { 'class': 'form-control'}}) }}
                </div>
            </div>
            <div class="col-sm-12 col-md-auto">
                <div class="form-group  {% if form_errors(book.title) %}error{% endif %}">
                    {{ form_label(book.title) }}
                    {{ form_widget(book.title, { 'attr': { 'class': 'form-control'}}) }}
                </div>
            </div>
            <div class="col-sm-12 col-md-auto ">
                <div class="form-group  {% if form_errors(book.author) %}error{% endif %}">
                    {{ form_label(book.author) }}
                    {{ form_widget(book.author, { 'attr': { 'class': 'form-control'}}) }}
                </div>
            </div>
            <div class="col-sm-12 col-md-auto ">
                <div class="form-group  {% if form_errors(book.volume) %}error{% endif %}">
                    {{ form_label(book.volume) }}
                    {{ form_widget(book.volume, { 'attr': { 'class': 'form-control'}}) }}
                </div>
            </div>
            <div class="col-sm-12 col-md-auto mt-2">
                <button type="button" class="btn btn-danger js-remove-book-item">Rimuovi </button>
            </div>
        </div>
    </div>

{% endmacro %}






{{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}

{{ form_errors(form) }}

<div class="form-row">
    <div class="col-sm-12 col-md-6">
        {{ form_row(form.person.last_name) }}
    </div>
    <div class="col-sm-12 col-md-6">
        {{ form_row(form.person.first_name) }}
    </div>
</div>
<div class="form-row">
    <div class="col-sm-12 col-md-6">
        {{ form_row(form.person.email) }}
    </div>
    <div class="col-sm-12 col-md-6">
        {{ form_row(form.person.phone) }}
    </div>
</div>
<div class="form-row">
    <div class="col-sm-12 col-md-6">
        {{ form_row(form.person.city) }}
    </div>
    <div class="col-sm-12 col-md-6">
        {{ form_row(form.classe, { 'attr': {'class': 'custom-select'} }) }}
    </div>
</div>

<hr>


<h3>Testi richiesti:</h3>


<div class="row js-booklist-wrapper"
 data-prototype="{{ formMacros.printBookRow(form.books.vars.prototype)|e('html_attr') }}"
 data-index="{{ form.books|length }}"
>
    {% for book in form.books %}
        {{ formMacros.printBookRow(book) }}
    {% endfor %}
</div>

<div class="row">
    <div class="col-12 d-flex justify-content-center m-5">
        <button type="button" class="btn btn-success js-add-book-item" data-collection-holder-class="js-booklist-wrapper">Aggiungi libro</button>
    </div>
</div>


<div class="form-row">
    <div class="col-sm-12 col-md-12">
        {{ form_row(form.otherInfo) }}
    </div>
</div>


<div class="form-row">
    <div class="col-sm-12 col-md-12">
        {{ form_row(form.coupondCode) }}
    </div>
</div>

<div class="form-row">
    <div class="col-sm-12 col-md-6">
        {{ form_row(form.privacyConfirmed) }}
    </div>
    <div class="col-sm-12 col-md-6 d-flex justify-content-center">
        {{ form_row(form.submit, {
            attr: {class: 'btn btn-primary btn-lg'}
        }) }}
    </div>
</div>

{{ form_rest(form) }}

{{ form_end(form) }}
